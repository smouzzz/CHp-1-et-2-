<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashcards Fiscalit√© (BIC)</title>
    <!-- Chargement de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chargement de la police Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* ... (Styles CSS identiques √† la version pr√©c√©dente) ... */
        body {
            font-family: 'Inter', sans-serif;
        }
        .flashcard-container {
            perspective: 1000px;
        }
        .flashcard {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }
        .flashcard.is-flipped {
            transform: rotateY(180deg);
        }
        .flashcard-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .flashcard-front {
            background-color: white;
            color: #111827;
        }
        .flashcard-back {
            background-color: #f3f4f6;
            color: #1f2937;
            transform: rotateY(180deg);
            border: 1px solid #d1d5db;
        }
        
        /* Style pour les boutons de difficult√© */
        .difficulty-btn {
            flex-grow: 1;
            padding: 0.75rem 0.5rem;
            font-size: 0.75rem; /* text-xs */
            font-weight: 500; /* medium */
            border-radius: 0.5rem; /* rounded-lg */
            transition: all 0.2s;
            border: 1px solid transparent;
        }
        .difficulty-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
    </style>
</head>
<body class="bg-gray-100 flex flex-col items-center justify-center min-h-screen p-4">

    <!-- ===== NOUVEAU: Conteneur de Connexion ===== -->
    <div id="login-container" class="w-full max-w-md mx-auto text-center p-6 bg-white rounded-lg shadow-xl">
        <!-- 
            NOTE: L'image 'image_2482dd.jpg' doit √™tre dans le M√äME DOSSIER
            que ce fichier HTML pour s'afficher.
        -->
        <img src="https://i.ytimg.com/vi/qA2yuzGhElk/maxresdefault.jpg" alt="Le M√©ga Boss" class="w-48 h-auto mx-auto rounded-lg mb-6 shadow-md" onerror="this.src='https://placehold.co/192x256/333/fff?text=M%C3%A9ga+Boss'; this.onerror=null;">
        
        <!-- Le 'whitespace-pre-line' respecte vos sauts de ligne -->
        <p class="text-gray-700 text-sm mb-4 whitespace-pre-line">
üíÄ Salut √† toi, jeune fiscalit√© perdue !
Te voil√† encore une fois face au grand portail de la souffrance comptable.

Ici, les bilans ne s‚Äô√©quilibrent jamais, les comptes 401 te jugent, et les immobilisations pleurent dans les tableaux Excel.
Mais avant d‚Äôentrer dans le temple du d√©bit et du cr√©dit‚Ä¶
Entre le mot de passe que le M√©ga Boss a d√ª te donner.

(S‚Äôil ne te l‚Äôa pas donn√©, c‚Äôest que t‚Äôas oubli√© de faire le virement. Reviens quand ce sera fait.) üí∏
Souviens-toi : No pain, no gain ‚Äî ou comme on dit chez nous, pas de douleur, pas de r√©sultat d‚Äôexploitation.
Allez, courage petit soldat du plan comptable.

Que tes √©critures soient justes, et que tes soldes ne soient jamais d√©biteurs. üìäüî•
        </p>

        <div class="mt-6">
            <input type="password" id="password-input" placeholder="Mot de passe..." class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>
        
        <button id="login-button" class="w-full bg-blue-600 text-white py-2 px-6 rounded-lg shadow-md hover:bg-blue-700 transition-colors mt-4 font-semibold">
            Entrer
        </button>

        <p id="error-message" class="text-red-500 text-sm mt-3 hidden">Mot de passe incorrect. Essaie encore, soldat.</p>
    </div>


    <!-- ===== ANCIENNE APP: Conteneur des Flashcards (cach√© par d√©faut) ===== -->
    <div id="app-container" class="w-full max-w-md mx-auto hidden">
        <!-- Titre -->
        <header class="text-center mb-6">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">Flashcards de Fiscalit√©</h1>
            <p class="text-lg text-blue-600 font-medium mt-1">Chapitres 1 & 2 : BIC</p>
        </header>

        <!-- Conteneur de la carte (pour la perspective) -->
        <div class="flashcard-container w-full h-80 md:h-96">
            <!-- La carte qui va tourner -->
            <div id="flashcard" class="flashcard">
                <!-- Face Recto (Question) -->
                <div id="flashcard-front" class="flashcard-face flashcard-front">
                    <!-- Le contenu sera ins√©r√© par JavaScript -->
                </div>
                <!-- Face Verso (R√©ponse) -->
                <div id="flashcard-back" class="flashcard-face flashcard-back">
                    <!-- Le contenu sera ins√©r√© par JavaScript -->
                </div>
            </div>
        </div>
        
        <!-- Indicateur (supprim√©, car l'ordre est al√©atoire) -->
        <div class="text-center mt-4 h-5">
             <!-- Espace r√©serv√© pour la hauteur -->
        </div>

        <!-- Contr√¥les de difficult√© (cach√©s par d√©faut) -->
        <div id="difficulty-controls" class="hidden w-full mt-4">
            <p class="text-center text-sm text-gray-600 mb-3">Comment avez-vous trouv√© cette question ?</p>
            <div class="flex justify-between items-center w-full gap-2">
                <button id="btn-very-easy" data-weight="1" class="difficulty-btn bg-green-100 text-green-800 border-green-200 hover:bg-green-200">Tr√®s facile</button>
                <button id="btn-easy" data-weight="3" class="difficulty-btn bg-lime-100 text-lime-800 border-lime-200 hover:bg-lime-200">Facile</button>
                <button id="btn-medium" data-weight="5" class="difficulty-btn bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-200">Moyen</button>
                <button id="btn-hard" data-weight="8" class="difficulty-btn bg-orange-100 text-orange-800 border-orange-200 hover:bg-orange-200">Dur</button>
                <button id="btn-very-hard" data-weight="10" class="difficulty-btn bg-red-100 text-red-800 border-red-200 hover:bg-red-200">Tr√®s dur</button>
            </div>
        </div>
         
         <p id="helper-text" class="text-center text-gray-500 text-xs mt-6">
            Cliquez sur la carte pour voir la r√©ponse.
        </p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- R√©f√©rences DOM pour la Connexion ---
            const loginContainer = document.getElementById('login-container');
            const appContainer = document.getElementById('app-container');
            const passwordInput = document.getElementById('password-input');
            const loginButton = document.getElementById('login-button');
            const errorMessage = document.getElementById('error-message');
            
            // --- 1. Donn√©es (Extraites de vos PDF) ---
            const flashcards = [
                // --- CHAPITRE 1 ---
                {
                    question: "Quelle est la distinction principale entre BIC et BNC ?",
                    answer: "<b>BIC (Art 34 CGI)</b>: Activit√©s commerciales, industrielles, ou artisanales.<br><b>BNC (Art 92 CGI)</b>: Professions lib√©rales, charges, offices, revenus de propri√©t√© intellectuelle."
                },
                {
                    question: "Qu'est-ce qu'un BIC par nature ?",
                    answer: "B√©n√©fices r√©alis√©s par des personnes physiques exer√ßant une profession commerciale, artisanale ou industrielle (de mani√®re habituelle, pour son propre compte, dans un but lucratif)."
                },
                {
                    question: "Donnez des exemples de BIC par d√©termination de la loi.",
                    answer: "(Art 34/35 CGI) Activit√©s assimil√©es : location d'√©tablissement muni du mat√©riel d'exploitation, location meubl√©e (usage habituel), location-g√©rance de fonds de commerce."
                },
                {
                    question: "Qu'est-ce qu'un BIC par attraction ?",
                    answer: "(Art 155 CGI) Lorsqu'une activit√© accessoire (BNC ou BA) est connexe √† l'activit√© BIC principale, l'ensemble des revenus est impos√© en BIC."
                },
                {
                    question: "Quelle est la limite entre BIC et Revenus Fonciers (RF) ?",
                    answer: "<b>Revenus Fonciers</b>: Location de biens immobiliers NON meubl√©s.<br><b>BIC</b>: Location de biens immobiliers MEUBL√âS."
                },
                {
                    question: "Qui est imposable en BIC (exemples) ?",
                    answer: "L'exploitant individuel (de plein droit √† l'IR, option IS possible), les associ√©s de soci√©t√©s de personnes (SNC, SCS, EURL...), les SARL de famille (sur option)."
                },
                {
                    question: "Qu'est-ce que la territorialit√© des BIC pour un domicili√© fiscal fran√ßais ?",
                    answer: "Il est redevable de l'imp√¥t fran√ßais sur son revenu total (mondial), sous r√©serve des conventions internationales pour √©viter la double imposition."
                },
                {
                    question: "Qu'est-ce que la territorialit√© des BIC pour un non-r√©sident ?",
                    answer: "Il est impos√© en France uniquement sur les revenus BIC exerc√©s en France."
                },
                {
                    question: "Quels sont les 3 r√©gimes fiscaux en BIC ?",
                    answer: "1. Micro-BIC<br>2. R√©el Simplifi√©<br>3. R√©el Normal<br>(Le choix d√©pend du CA HT et de la nature de l'activit√©)."
                },
                {
                    question: "Quels sont les seuils de CA HT pour le r√©gime Micro-BIC ?",
                    answer: "<b>Achat/revente & Fourniture logement</b>: ‚â§ 188 700 ‚Ç¨<br><b>Prestations de services</b>: ‚â§ 77 700 ‚Ç¨"
                },
                {
                    question: "Quels sont les seuils de CA HT pour le r√©gime R√©el Simplifi√© ?",
                    answer: "<b>Achat/revente</b>: entre 188 700 ‚Ç¨ et 840 000 ‚Ç¨<br><b>Prestations</b>: entre 77 700 ‚Ç¨ et 254 000 ‚Ç¨"
                },
                {
                    question: "Quels sont les seuils de CA HT pour le r√©gime R√©el Normal ?",
                    answer: "<b>Achat/revente</b>: > 840 000 ‚Ç¨<br><b>Prestations</b>: > 254 000 ‚Ç¨"
                },
                {
                    question: "Quels sont les abattements forfaitaires en Micro-BIC ?",
                    answer: "<b>71%</b> pour achat/revente et fourniture de logement.<br><b>50%</b> pour les prestations de services."
                },
                
                // --- CHAPITRE 2 ---
                {
                    question: "Qu'est-ce que le principe de l'ind√©pendance des exercices ?",
                    answer: "(Art 36 CGI) Principe de l'annualit√© : le b√©n√©fice d√©clar√© est celui arr√™t√© au cours de l'ann√©e (exercice comptable de 12 mois)."
                },
                {
                    question: "Qu'est-ce que le principe de la comptabilit√© d'engagement ?",
                    answer: "Les dettes et cr√©ances sont rattach√©es √† l'exercice o√π elles deviennent certaines (dans leur principe et leur montant).<br><b>Ventes</b>: date de livraison.<br><b>Prestations</b>: date d'ach√®vement."
                },
                {
                    question: "Qu'est-ce que le principe du nominalisme mon√©taire ?",
                    answer: "Comptabilisation en euros au co√ªt historique. Les dettes/cr√©ances en devises sont converties au cours du jour, puis r√©√©valu√©es √† la date de cl√¥ture (cr√©ant un √©cart de conversion)."
                },
                {
                    question: "Quel est le traitement fiscal d'un gain de change latent √† la cl√¥ture ?",
                    answer: "Il est <b>impos√©</b> (via une r√©int√©gration extra-comptable)."
                },
                {
                    question: "Quel est le traitement fiscal d'une perte de change latente √† la cl√¥ture ?",
                    answer: "Elle est <b>d√©ductible</b> (via une provision pour perte de change)."
                },
                {
                    question: "Quand une vente de bien est-elle rattach√©e √† l'exercice ?",
                    answer: "√Ä la <b>livraison</b>, sauf pour les ventes sous condition suspensive (rattach√©es √† la r√©alisation de la condition)."
                },
                {
                    question: "Quand une prestation de service est-elle rattach√©e √† l'exercice ?",
                    answer: "√Ä l'<b>ach√®vement</b> de la prestation. (Pour les prestations continues comme un loyer, c'est au fur et √† mesure)."
                },
                {
                    question: "Comment sont √©valu√©s les stocks ?",
                    answer: "Au <b>prix de revient actuel</b> (co√ªt de production). Si la valeur √† l'inventaire est plus basse, on constitue une <b>provision pour d√©pr√©ciation</b>."
                },
                {
                    question: "Qu'est-ce que la production immobilis√©e ?",
                    answer: "Ce sont des biens produits par l'entreprise pour elle-m√™me et qui sont immobilis√©s (inscrits √† l'actif). C'est un produit imposable."
                },
                {
                    question: "Les subventions d'√©quipement sont-elles imposables ?",
                    answer: "<b>Oui</b>, l'ann√©e de la d√©cision d'attribution. Un √©talement optionnel (Art 42.7 CGI) est possible (proportionnellement √† l'amortissement ou sur 10 ans/dur√©e d'inali√©nabilit√©)."
                },
                {
                    question: "Quelles sont les 3 conditions de FOND pour la d√©ductibilit√© d'une charge ?",
                    answer: "1. Entra√Æner une diminution de l'actif net (pas de contrepartie √† l'actif).<br>2. Constituer un acte normal de gestion.<br>3. Ne pas √™tre exclue par une disposition du CGI."
                },
                {
                    question: "Quelles sont les conditions de FORME pour la d√©ductibilit√© d'une charge ?",
                    answer: "1. √ätre inscrite en comptabilit√©.<br>2. √ätre expos√©e dans l'int√©r√™t de l'entreprise.<br>3. √ätre justifi√©e par une facture."
                },
                {
                    question: "Les loyers de cr√©dit-bail sont-ils d√©ductibles ?",
                    answer: "<b>Oui</b> (charges externes), mais avec des limitations pour les v√©hicules de tourisme (similaires aux amortissements)."
                },
                {
                    question: "Les d√©penses de publicit√© (sponsoring, parrainage) sont-elles d√©ductibles ?",
                    answer: "<b>Oui</b>, si elles sont engag√©es dans l'int√©r√™t direct de l'entreprise et ne sont pas excessives."
                },
                {
                    question: "Quels imp√¥ts ne sont PAS d√©ductibles ?",
                    answer: "L'<b>IR</b> (Imp√¥t sur le Revenu), l'<b>IS</b> (Imp√¥t sur les Soci√©t√©s) et la part non d√©ductible de la CSG-CRDS."
                },
                {
                    question: "La r√©mun√©ration du dirigeant d'une soci√©t√© soumise √† l'IR est-elle d√©ductible ?",
                    answer: "<b>Non</b>. Seules ses charges sociales obligatoires sont d√©ductibles. (Elles sont d√©ductibles si la soci√©t√© est √† l'IS)."
                },
                {
                    question: "Les int√©r√™ts des avances en compte courant d'associ√© sont-ils d√©ductibles ?",
                    answer: "<b>Oui</b>, mais dans une double limite : le capital doit √™tre enti√®rement lib√©r√© et le taux d'int√©r√™t est plafonn√© (taux maximal publi√©)."
                },
                {
                    question: "Les p√©nalit√©s et amendes sont-elles d√©ductibles ?",
                    answer: "<b>P√©nalit√©s contractuelles</b> (ex: retard client) : OUI.<br><b>P√©nalit√©s pour contraventions l√©gales</b> (ex: fiscales, routi√®res) : NON (√† r√©int√©grer)."
                },
                {
                    question: "Qu'est-ce qu'un bien amortissable ?",
                    answer: "Un bien utilis√© sur plusieurs cycles d'exploitation, appartenant √† l'entreprise, inscrit au bilan, et qui se d√©pr√©cie avec le temps."
                },
                {
                    question: "Comment est calcul√©e la Valeur Nette Comptable (VNC) d'un bien amortissable ?",
                    answer: "VNC = Valeur d'acquisition - Somme des amortissements comptables."
                },
                {
                    question: "Quelles sont les conditions pour utiliser l'amortissement d√©gressif ?",
                    answer: "1. Le bien doit √™tre <b>neuf</b>.<br>2. Sa dur√©e d'utilisation doit √™tre d'au moins <b>3 ans</b>.<br>3. Il doit figurer sur la liste (Art 22 annexe 2 CGI)."
                },
                {
                    question: "Quels sont les coefficients de l'amortissement d√©gressif ?",
                    answer: "<b>1.25</b> (3-4 ans)<br><b>1.75</b> (5-6 ans)<br><b>2.25</b> (> 6 ans)"
                },
                {
                    question: "La d√©duction des amortissements des v√©hicules de tourisme est-elle limit√©e ?",
                    answer: "<b>Oui</b>. La d√©duction est plafonn√©e (selon date d'acquisition et taux de CO2). L'exc√©dent non d√©ductible doit √™tre r√©int√©gr√© extra-comptablement."
                },
                {
                    question: "Qu'est-ce qu'un amortissement irr√©guli√®rement diff√©r√© ?",
                    answer: "Un amortissement non comptabilis√© alors qu'il aurait d√ª l'√™tre. Le droit √† d√©duction est <b>perdu</b> (mais pris en compte dans le calcul de la plus-value)."
                },
                {
                    question: "Quelles sont les conditions de fond pour d√©duire une provision ?",
                    answer: "1. Perte ou charge nettement pr√©cis√©e.<br>2. Probable (et non juste √©ventuelle).<br>3. Fait g√©n√©rateur n√© dans l'exercice.<br>4. Couvrir une charge fiscalement d√©ductible."
                },
                {
                    question: "Une provision pour licenciement √©conomique est-elle d√©ductible ?",
                    answer: "<b>Non</b>. (Seule celle pour motif personnel est admise si la proc√©dure a d√©but√©)."
                },
                {
                    question: "Une provision pour charge de retraite est-elle d√©ductible ?",
                    answer: "<b>Non</b>, jamais. (Elles sont constitu√©es librement par l'entreprise)."
                },
                {
                    question: "Qu'est-ce qu'une provision r√©glement√©e (ex: hausse des prix) ?",
                    answer: "Une provision √† caract√®re fiscal offrant un avantage temporaire. Ex: Provision pour hausse des prix (si hausse > 10%), rapport√©e au r√©sultat au plus tard le 6e exercice suivant."
                },
                {
                    question: "Comment est impos√©e une Plus-Value (PV) nette √† Court Terme (CT) ?",
                    answer: "Elle est imposable au <b>taux normal</b> (int√©gr√©e au r√©sultat d'exploitation)."
                },
                {
                    question: "Comment est impos√©e une Plus-Value (PV) nette √† Long Terme (LT) ?",
                    answer: "Elle est impos√©e au <b>taux r√©duit</b> (modalit√©s selon r√©gime IR ou IS)."
                },
                {
                    question: "Comment s'impute une Moins-Value (MV) nette √† Court Terme (CT) ?",
                    answer: "Elle s'impute directement sur le <b>b√©n√©fice d'exploitation</b> de l'exercice."
                },
                {
                    question: "Comment s'impute une Moins-Value (MV) nette √† Long Terme (LT) ?",
                    answer: "Elle est imputable <b>uniquement</b> sur les Plus-Values nettes √† Long Terme des <b>10 exercices suivants</b>."
                },
                {
                    question: "Quel est le r√©gime sp√©cial pour les produits de la propri√©t√© intellectuelle (brevets) ?",
                    answer: "Les produits de cession de brevets (acquis depuis +2 ans) et les concessions de licence b√©n√©ficient du r√©gime des <b>plus-values √† long terme</b> (taux r√©duit)."
                }
            ];

            // --- 2. √âtat de l'application ---
            let deck = [];
            let currentCardIndex = 0;
            let isFlipped = false;

            // --- 3. R√©f√©rences DOM pour l'App ---
            const flashcard = document.getElementById('flashcard');
            const flashcardFront = document.getElementById('flashcard-front');
            const flashcardBack = document.getElementById('flashcard-back');
            const difficultyControls = document.getElementById('difficulty-controls');
            const difficultyButtons = document.querySelectorAll('.difficulty-btn');
            const helperText = document.getElementById('helper-text');

            // --- 4. Fonctions de l'App ---

            /**
             * Initialise le "deck" de cartes avec un poids par d√©faut.
             */
            function initializeApp() {
                // Cr√©e le deck de r√©vision. Chaque carte a un poids initial de 5 (Moyen).
                deck = flashcards.map((card, index) => ({
                    ...card,
                    originalIndex: index,
                    weight: 5 // Poids initial, 5 = Moyen
                }));
                showNextCard();
            }
            
            /**
             * S√©lectionne la prochaine carte en utilisant un tirage pond√©r√©.
             */
            function showNextCard() {
                // 1. Calculer le poids total du deck
                let totalWeight = deck.reduce((acc, card) => acc + card.weight, 0);
                
                // 2. G√©n√©rer un nombre al√©atoire entre 0 et le poids total
                let randomWeight = Math.random() * totalWeight;
                
                // 3. Trouver la carte correspondant √† ce poids
                let selectedIndex = -1;
                for (let i = 0; i < deck.length; i++) {
                    randomWeight -= deck[i].weight;
                    if (randomWeight <= 0) {
                        selectedIndex = i;
                        break;
                    }
                }
                
                if (selectedIndex === -1) {
                    // S√©curit√© au cas o√π (ne devrait pas arriver)
                    selectedIndex = Math.floor(Math.random() * deck.length);
                }
                
                currentCardIndex = selectedIndex;
                updateFlashcard(currentCardIndex);
            }

            /**
             * Met √† jour le contenu de la carte et r√©initialise son √©tat.
             */
            function updateFlashcard(index) {
                const card = deck[index];
                flashcardFront.innerHTML = `<span class="text-xl md:text-2xl font-semibold">${card.question}</span>`;
                flashcardBack.innerHTML = `<span class="text-base md:text-lg">${card.answer}</span>`;
                
                // R√©initialiser la carte (la mettre c√¥t√© question)
                if (isFlipped) {
                    flipCard(); // Retourne la carte si elle √©tait sur la r√©ponse
                } else {
                    // S'assurer que les contr√¥les sont cach√©s si la carte n'√©tait pas retourn√©e
                    difficultyControls.classList.add('hidden');
                    helperText.classList.remove('hidden');
                }
            }

            /**
             * G√®re le clic sur un bouton de difficult√©.
             */
            function handleDifficultyClick(event) {
                // 1. R√©cup√©rer le nouveau poids depuis l'attribut data-weight
                const newWeight = parseInt(event.currentTarget.dataset.weight, 10);
                
                // 2. Mettre √† jour le poids de la carte actuelle dans le deck
                deck[currentCardIndex].weight = newWeight;
                
                // 3. Afficher la prochaine carte (s√©lection pond√©r√©e)
                showNextCard();
            }

            /**
             * Retourne la carte (animation) et affiche/cache les contr√¥les.
             */
            function flipCard() {
                isFlipped = !isFlipped;
                flashcard.classList.toggle('is-flipped');
                
                if (isFlipped) {
                    // La carte est sur la face "R√©ponse"
                    difficultyControls.classList.remove('hidden');
                    helperText.classList.add('hidden');
                } else {
                    // La carte est sur la face "Question"
                    difficultyControls.classList.add('hidden');
                    helperText.classList.remove('hidden');
                }
            }

            // --- 5. √âcouteurs d'√©v√©nements ---

            // √âcouteur pour le bouton de connexion
            loginButton.addEventListener('click', () => {
                if (passwordInput.value === 'stage') {
                    // Mot de passe correct
                    loginContainer.classList.add('hidden');
                    appContainer.classList.remove('hidden');
                    errorMessage.classList.add('hidden');
                    
                    // --- 6. Initialisation de l'app ---
                    initializeApp(); // D√©marrer l'application SEULEMENT MAINTENANT

                } else {
                    // Mot de passe incorrect
                    errorMessage.classList.remove('hidden');
                    passwordInput.value = ''; // Vider le champ
                    passwordInput.focus(); // Remettre le focus
                }
            });

            // Permettre de valider avec "Entr√©e"
            passwordInput.addEventListener('keyup', (event) => {
                if (event.key === 'Enter') {
                    event.preventDefault(); // Emp√™che le comportement par d√©faut (si c'est dans un formulaire)
                    loginButton.click(); // Simuler un clic sur le bouton
                }
            });

            // Cliquer sur la carte pour la retourner
            flashcard.addEventListener('click', flipCard);

            // Ajouter un √©couteur pour chaque bouton de difficult√©
            difficultyButtons.forEach(button => {
                button.addEventListener('click', handleDifficultyClick);
            });

            // --- 6. Initialisation ---
            // initializeApp(); // On ne d√©marre PAS l'application tout de suite.
            passwordInput.focus(); // Mettre le focus sur le champ mot de passe au chargement

        });
    </script>
</body>
</html>
